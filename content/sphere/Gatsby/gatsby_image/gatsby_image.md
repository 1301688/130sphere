---
title: "Gatsbyã®ç”»åƒ"
date: "2021-06-23"
updateDate: ""
type: ""
category: "gatsby"
description: "è‡ªåˆ†ã®å­¦ç¿’ãƒãƒ¼ãƒˆ_Gatsby"
emoji: "ğŸƒ"
topImage: ""
---

#### ä»Šå›ã®ç›®çš„
- Gatsbyã®Appã§ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹

#### ç›®çš„é”æˆã«å‘ã‘ã¦ã®å•é¡Œ
- ç”»åƒè¡¨ç¤ºæ–¹æ³•ãŒç†è§£ã§ãã¦ã„ãªã„

#### å•é¡Œè§£æ±ºã«å¯¾ã—ã¦ã®èª²é¡Œ
- åŸºæœ¬æƒ…å ±åé›†

#### åŸºæœ¬æƒ…å ±(ä½¿ã„æ–¹ã‚„æ¦‚å¿µãªã©)ã€€é †åºç«‹ã¦ã¦æ›¸ã
#### ç”»åƒã‚’æ ¼ç´ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- è¡¨ç¤ºã•ã›ãŸã„ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’Gatsbyãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§èª­ã¿å–ã‚Šå¯èƒ½ãªå ´æ‰€ã«æ ¼ç´ã™ã‚‹
>- root/src/imagesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
>- root/staticãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
>- metaãƒ•ã‚¡ã‚¤ãƒ«ç³»ã«ãƒ™ã‚¿æ›¸ã â€»å¾Œæ—¥

â€»ã¯å¾Œæ—¥ã¾ã¨ã‚
#### ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª/ãƒ•ã‚¡ã‚¤ãƒ«
- æœ€çµ‚çš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒšãƒ¼ã‚¸ã‚’ä¸‹è¨˜ã«è¨˜è¿°ã—ã¦ç›´æ„Ÿçš„ã«ã™ã‚‹
>- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ãƒ¼ãƒ³ãƒšãƒ¼ã‚¸	
>- è¨˜äº‹ãƒšãƒ¼ã‚¸å†…ã®ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒ	
>- è¨˜äº‹ã‚«ãƒ¼ãƒ‰ã®ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒ		
>- OGPï¼ˆmetaDataï¼‰â€»å¾Œæ—¥SEOã®æ™‚		
>- å ´æ‰€ã«ã‚ˆã£ã¦è¨­å®šæ–¹æ³•ãŒé•ã†ã“ã¨ã«æ³¨æ„ã™ã‚‹		
#### ç”»åƒã®è¡¨ç¤ºæ–¹æ³•
- åŸºæœ¬çš„ãªè¡¨ç¤ºæ–¹æ³•ã¯å¤§ããåˆ†ã‘ã¦5ã¤
>- ãƒªãƒ†ãƒ©ãƒ«è¨˜æ³•ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•
> â‘ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã—ã¦è¡¨ç¤º  
> â‘¡staticãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã—ã¦è¡¨ç¤º
>- GraphQLã®queryçµæœã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•(ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼)
> â‘¢GraphQLã«ã‚ˆã‚‹ç”»åƒã®è¡¨ç¤º 
> â‘£Gatsby-imageãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ãŸç”»åƒã®è¨­å®š
> â‘¤Gatsby-plugin-imageãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ãŸç”»åƒã®è¨­å®š
#### ç”»åƒã®è¡¨ç¤ºæ–¹æ³•ï½œãƒªãƒ†ãƒ©ãƒ«è¨˜æ³•ç³»
â‘ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã—ã¦è¡¨ç¤ºâ–¼
> 1. root/src/imagesã«ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã
> 2. root/src/pages/index.jsã§ä¸Šè¨˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã™ã‚‹
> 3. importã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’JSXè¨˜æ³•ã§è¨˜è¿°ã™ã‚‹
```
import React from "react"
import Test from "../images/sample.svg"

export default function Home() {
  return (
      <div>Hello isao!!</div>
      <img src={Test} alt="test" />
  )
}

```
â‘¡staticãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã—ã¦è¡¨ç¤ºâ–¼
> 1. root/staticã«ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã
> 2. è¡¨ç¤ºã—ãŸã„pageã«JSXè¨˜æ³•ã§è¨˜è¿°ã™ã‚‹  
> staticãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ã¨  
> root/publicãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ã§ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹  
> â€»Gatsbyã§ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ç”Ÿæˆã•ã‚Œã‚‹ cleanã§å‰Šé™¤ã•ã‚Œã‚‹  
> JSXè¨˜è¿°ã™ã‚‹æ™‚staticãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç”»åƒä¿å­˜ã—ãŸã®ã§  
> static/staticTest.svgã¨srcã«æŒ‡å®šã™ã‚‹ã®ã§ã¯ãªã  
> publicãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹staticTest.svgã¨  
> æŒ‡å®šã™ã‚‹ã ã‘ã§ç”»åƒè¡¨ç¤ºã•ã‚Œã‚‹
```
import React from "react"

export default function Home() {
  return (
    
      <div>Hello isao!!</div>
      <img src="/staticTest.svg" alt="test" />
  )
}

```
<!-- ã“ã“ã‹ã‚‰ä¸‹â‘¢ã€â‘£ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€å®Ÿè£…ã—ã¦ã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ -->
#### ç”»åƒã®è¡¨ç¤ºæ–¹æ³•ï½œGraphQL:ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼è¨˜æ³•ç³»
â‘¢GraphQLã«ã‚ˆã‚‹ç”»åƒã®è¡¨ç¤º
> 1. gatsby-source-filesystemã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ 
> 2. GraphiQLã§queryã‚’å®Ÿè¡Œã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®æƒ…å ±ã‚’å–å¾—  
> 3. ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€ç¨®ãªã®ã§GraphiQLã®  
> queryã‚’å®Ÿè¡Œã™ã‚‹ã¨imagesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã‚’  
> å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹    
> â€»GraphiQLã®çµæœã‹ã‚‰ç¢ºèªã—ãŸpublicURLã‚’ç›´æ¥srcã«æŒ‡å®šã—ã¦è¡¨ç¤ºã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ãŒ  
> GraphQLã®queryã®å®Ÿè¡Œçµæœã‚’ãã®ã¾ã¾åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹...æ®†ã©ã¯ã“ã£ã¡   
> â€»GraphiQL(ã‚°ãƒ©ãƒ•ã‚£ã‚¯ãƒ«):GraphQL APIã®ä½¿ã„ã‚„ã™ã„GUIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€IDE  
> â€»GraphQL(ã‚°ãƒ©ãƒ•QL):GraphQL APIãã®ã‚‚ã®  
ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å ´åˆâ–¼
```
import React from "react"
import { graphql } from "gatsby"

export default function Home({ data }) {
  return (
      <div>Hello isao!!</div>
      <img src={data.file.publicURL} alt="test" />
  )
}

export default query = graphql`
  {
    file(name: {eq: "test"}) {
      publicURL
    }
  }
`
```
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å ´åˆâ–¼
```
import React from "react"
import { useStaticQuery, graphql } from "gatsby"

const Header = () => {
  const data = useStaticQuery(
    graphql`
      {
        file(name: { eq: "test" }) {
          publicURL
        }
      }
    `
  )
}
```

â‘£Gatsby-imageãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ãŸç”»åƒã®è¨­å®š
- Gatsbyã«ã¯ç”»åƒã®æœ€é©åŒ–ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®é‡è¦ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚‹  
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§æ‰‹é–“ã®ã‹ã‹ã‚‹ç”»åƒæœ€é©åŒ–ã®ä½œæ¥­ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹
> 1. Gatsby-imageãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ä¸‹è¨˜ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
>- yarn add gatsby-transformer-sharp
>- yarn add gatsby-plugin-sharp
>- yarn add gatsby-image
> 2. gatsby-config.jsãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã™ã‚‹
> 3. è¨­å®šå®Œäº†å¾Œã€gatsby-developã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
> 4. GraphiQLã«allimageSharpã¨imageSharpãŒè¿½åŠ ã•ã‚Œã„ã‚‹ã“ã¨ã‚’ç¢ºèª
> 5. GraphiQLã®queryã§imagesãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹sample.svgã®  
> æƒ…å ±ãŒå–å¾—ã§ãã¦ã„ã‚‹ã‹ç¢ºèª â€»queryã®é …ç›®æŒ‡å®šæ–¹æ³•ã¯å¤šç¨®å¤šæ§˜
> 6. gatsby-imageã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚gatsby-imageã‚’importã™ã‚‹
> 7. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«queryã¨JSXã‚’è¨˜è¿°ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
gatsby-config.jsã®è¨­å®šâ–¼  
â€»gatsby-imageã¯gatsby-config.jsãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã™ã‚‹å¿…è¦ã¯ãªã„
```
plugins: [
  `gatsby-transformer-sharp`,
  `gatsby-plugin-sharp`,
  {
    resolve: `gatsby-source-filesystem`,
    options: {
      name: `images`,
      path: `${__dirname}/src/images`,
    }
  }
]
```
ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å ´åˆâ–¼
```
import React from "react"
import Img from "gatsby-image"

export default function Home({ data }) {
  return (
      <div>Hello isao!!</div>
      <Img fixed={data.testFixed.childImageSharp.fixed} alt="samplefixed" />
      <Img fluid={data.testFluid.childImageSharp.fluid} alt="samplefluid" />
  )
}

export default query = graphql`
  {
    sampleFixed: file(relativePath: {eq: "sample.svg"}) {
      childImageSHarp {
        fixed(width: 300) {
          ...GatsbyImageSharpFixed
        }
      }
    }
    sampleFluid: file(relativePath: {eq: "sample.svg"}) {
      childImageSHarp {
        fluid(maxWidth: 300) {
          ...GatsbyImageSharpFluid
        }
      }
    }
  }
`
```
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å ´åˆâ–¼
```
import React from "react"
import { useStaticQuery, graphql } from "gatsby"
import Img from "gatsby-image"

const Header = () => {
  const data = useStaticQuery(
    graphql`
      {
        sampleFixed: file(relativePath: {eq: "sample.svg"}) {
          childImageSHarp {
            fixed(width: 300) {
              ...GatsbyImageSharpFixed
            }
          }
        }
        sampleFluid: file(relativePath: {eq: "sample.svg"}) {
          childImageSHarp {
            fluid(maxWidth: 300) {
              ...GatsbyImageSharpFluid
            }
          }
        }
      }
    `
  )
}
```
<!-- ä¸Šè¨˜queryã¯é–“é•ãˆã¦ã„ã‚‹ã®ã§ã€graphqlã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«å®Ÿè£…ãƒ†ã‚¹ãƒˆå¿…è¦ -->
â‘¤Gatsby-plugin-imageãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ãŸç”»åƒã®è¨­å®š 
â€»ã“ã‚Œè©°ã¾ã‚Šãã†ã€‚ã€‚ã€‚å®Ÿè£…æ™‚ã¾ã¨ã‚ã«å¤‰æ›´ã€€gatsby-imageã‚ˆã‚Šè‰¯ã„ã¨æ€ã‚ã‚Œã‚‹

https://typememo.jp/tech/gatsby-image-evolution-gatsby-plugin-image/

https://software.pitang1965.com/2021/03/25/migrating-from-gatsby-image-to-gatsby-plugin-image/

https://zenn.dev/kaito18/articles/1b7a813375ac69

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«å®Ÿè£…ã€ç†è§£ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ã™ã‚‹



â€»å¾Œæ—¥
â€»ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã«ç”»åƒè¡¨ç¤ºã—ãŸã„ã‚±ãƒ¼ã‚¹ã¯å¾Œæ—¥ã¾ã¨ã‚ã‚‹
â†’Markdownã¸ç”»åƒè¡¨ç¤ºã™ã‚‹å ´åˆã®çµè«–
  â†’ gatsby-remark-images (ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ä¸Šã«ç”»åƒè¡¨ç¤ºã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³)		
  â†’ gatsby-plugin-sharp (ç”»åƒã®ãƒªã‚µã‚¤ã‚º , ç”»åƒã®æœ€é©åŒ–)		
  â†’ gatsby-remark-relative-images (mdãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã§ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã‚‹)	
    â€»Mdxã‚’ãƒ™ãƒ¼ã‚¹ã«ã™ã‚‹å ´åˆã€å¿…è¦ãªã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€€é€†ã«errorç™ºç”Ÿã™ã‚‹
  â†’ configã¸ä¸Šè¨˜pluginã‚’è¨˜è¼‰ã™ã‚‹æ™‚ã€æ›¸ãå ´æ‰€ã«æ³¨æ„
    â†’	mdxãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ä½¿ç”¨ã™ã‚‹é…ä¸‹ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ gatsby-remark-imagesã‚„
    â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã«å¯¾ã—ã¦ã®pluginã¿ãŸã„ãªè€ƒãˆæ–¹
- ãƒ‘ãƒ©ãƒ¡ã‚¿ç³»ã«ã—ã¦å–ã‚‹å ´åˆã¯å¸¸ã«ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦			
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã™ã‚‹ã“ã¨ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°


ã€€

